# HealthKit æµ‹è¯•æŒ‡å— - æ¬¢è¿é¡µé¢æµ‹è¯•æŒ‰é’®

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

åœ¨æ¬¢è¿é¡µé¢æ·»åŠ äº†ä¸€ä¸ª **"Test HealthKit Steps"** æµ‹è¯•æŒ‰é’®ï¼Œç”¨äºéªŒè¯ HealthKit é›†æˆæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚è¯¥æŒ‰é’®ä½¿ç”¨æ‚¨æŒ‡å®šçš„å¯¼å…¥æ–¹å¼æ¥è·å–ç”¨æˆ·çš„æ­¥æ•°æ•°æ®ã€‚

## ğŸ”§ å®ç°ç»†èŠ‚

### **å¯¼å…¥æ–¹å¼**
æŒ‰ç…§æ‚¨çš„è¦æ±‚ä½¿ç”¨ä»¥ä¸‹å¯¼å…¥æ–¹å¼ï¼š
```javascript
import BrokenHealthKit, { HealthKitPermissions } from "react-native-health";
const AppleHealthKit = NativeModules.AppleHealthKit;

// Only set Constants if AppleHealthKit is available
if (AppleHealthKit && BrokenHealthKit.Constants) {
  AppleHealthKit.Constants = BrokenHealthKit.Constants;
}
```

### **åŠŸèƒ½ç‰¹æ€§**
- âœ… **å¹³å°æ£€æµ‹** - åªåœ¨ iOS è®¾å¤‡ä¸Šæ˜¾ç¤ºæµ‹è¯•æŒ‰é’®
- âœ… **æƒé™è¯·æ±‚** - è‡ªåŠ¨è¯·æ±‚ HealthKit æ­¥æ•°æƒé™
- âœ… **æ•°æ®è·å–** - è·å–æœ€è¿‘7å¤©çš„æ­¥æ•°æ•°æ®
- âœ… **ç»“æœæ˜¾ç¤º** - æ˜¾ç¤ºè¯¦ç»†çš„æµ‹è¯•ç»“æœå’Œç»Ÿè®¡ä¿¡æ¯
- âœ… **é”™è¯¯å¤„ç†** - å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º
- âœ… **åŠ è½½çŠ¶æ€** - æµ‹è¯•è¿‡ç¨‹ä¸­æ˜¾ç¤ºåŠ è½½åŠ¨ç”»

## ğŸ“± ç”¨æˆ·ç•Œé¢

### **æµ‹è¯•æŒ‰é’®**
- ğŸŸ£ ç´«è‰²æ¸å˜æŒ‰é’®è®¾è®¡
- ğŸ§ª æµ‹è¯•ç®¡å›¾æ ‡ + æ–‡å­—
- â³ æµ‹è¯•ä¸­æ˜¾ç¤ºåŠ è½½åŠ¨ç”»

### **æµ‹è¯•ç»“æœå¡ç‰‡**
- âœ… **æˆåŠŸçŠ¶æ€** - ç»¿è‰²è¾¹æ¡†å’ŒèƒŒæ™¯
- âŒ **å¤±è´¥çŠ¶æ€** - çº¢è‰²è¾¹æ¡†å’ŒèƒŒæ™¯
- ğŸ“Š **ç»Ÿè®¡ä¿¡æ¯** - æ€»æ­¥æ•°ã€æ—¥å‡æ­¥æ•°ã€å¤©æ•°

## ğŸš€ æµ‹è¯•æµç¨‹

### **1. å¯åŠ¨åº”ç”¨**
```bash
npx expo start
# æˆ–è€…
npx expo run:ios
```

### **2. å¯¼èˆªåˆ°æ¬¢è¿é¡µé¢**
- åº”ç”¨å¯åŠ¨åä¼šæ˜¾ç¤ºæ¬¢è¿é¡µé¢
- iOS è®¾å¤‡ä¸Šä¼šçœ‹åˆ°ç´«è‰²çš„ "Test HealthKit Steps" æŒ‰é’®

### **3. ç‚¹å‡»æµ‹è¯•æŒ‰é’®**
æŒ‰é’®ä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
1. **æ£€æŸ¥å¹³å°** - ç¡®è®¤æ˜¯ iOS è®¾å¤‡
2. **æ£€æŸ¥åº“å¯ç”¨æ€§** - éªŒè¯ HealthKit åº“æ˜¯å¦æ­£ç¡®å®‰è£…
3. **æ£€æŸ¥è®¾å¤‡æ”¯æŒ** - ç¡®è®¤è®¾å¤‡æ”¯æŒ HealthKit
4. **è¯·æ±‚æƒé™** - å¼¹å‡º iOS ç³»ç»Ÿæƒé™å¯¹è¯æ¡†
5. **è·å–æ•°æ®** - è·å–æœ€è¿‘7å¤©çš„æ­¥æ•°æ•°æ®
6. **æ˜¾ç¤ºç»“æœ** - å±•ç¤ºæµ‹è¯•ç»“æœå’Œç»Ÿè®¡ä¿¡æ¯

## ğŸ“Š é¢„æœŸç»“æœ

### **æˆåŠŸæƒ…å†µ**
- âœ… æ˜¾ç¤ºæˆåŠŸæç¤ºå¯¹è¯æ¡†
- âœ… åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºç»¿è‰²ç»“æœå¡ç‰‡
- âœ… æ˜¾ç¤ºæ­¥æ•°ç»Ÿè®¡ä¿¡æ¯ï¼š
  - ğŸ“Š æ€»æ­¥æ•°
  - ğŸ“ˆ æ—¥å‡æ­¥æ•°  
  - ğŸ“… æ•°æ®å¤©æ•°

**ç¤ºä¾‹æˆåŠŸä¿¡æ¯**ï¼š
```
HealthKit Test Successful! ğŸ‰
âœ… Found 7 days of step data
ğŸ“Š Total steps: 45,238
ğŸ“ˆ Daily average: 6,462 steps
```

### **å¤±è´¥æƒ…å†µ**
å¯èƒ½çš„å¤±è´¥åŸå› å’Œå¯¹åº”æç¤ºï¼š

1. **é iOS è®¾å¤‡**
   ```
   Platform Not Supported
   HealthKit is only available on iOS devices.
   ```

2. **åº“æœªå®‰è£…**
   ```
   HealthKit Not Available
   HealthKit library is not properly installed or linked.
   ```

3. **è®¾å¤‡ä¸æ”¯æŒ**
   ```
   HealthKit Not Available
   HealthKit is not available on this device.
   ```

4. **æƒé™è¢«æ‹’ç»**
   ```
   Permission Request Failed
   Could not request HealthKit permission: [é”™è¯¯ä¿¡æ¯]
   ```

5. **æ— æ•°æ®**
   ```
   âŒ Test Result
   No step data found for the last 7 days.
   ```

## ğŸ” è°ƒè¯•ä¿¡æ¯

æµ‹è¯•è¿‡ç¨‹ä¸­ä¼šè¾“å‡ºè¯¦ç»†çš„æ§åˆ¶å°æ—¥å¿—ï¼š

```javascript
[Welcome] Testing HealthKit step data fetch...
[Welcome] HealthKit is available, requesting permission...
[Welcome] Permission granted, fetching step data...
[Welcome] Step data fetched successfully: [æ•°æ®æ•°ç»„]
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### **è®¾å¤‡è¦æ±‚**
- **å¿…é¡»æ˜¯çœŸå® iOS è®¾å¤‡** - HealthKit ä¸æ”¯æŒ iOS æ¨¡æ‹Ÿå™¨
- **iOS 8.0+** - HealthKit çš„æœ€ä½ç³»ç»Ÿè¦æ±‚
- **æœ‰æ­¥æ•°æ•°æ®** - è®¾å¤‡ä¸Šéœ€è¦æœ‰å¥åº·åº”ç”¨è®°å½•çš„æ­¥æ•°æ•°æ®

### **æƒé™è®¾ç½®**
- é¦–æ¬¡æµ‹è¯•ä¼šå¼¹å‡º iOS ç³»ç»Ÿæƒé™å¯¹è¯æ¡†
- ç”¨æˆ·éœ€è¦æˆäºˆ"æ­¥æ•°"æƒé™
- å¦‚æœä¹‹å‰æ‹’ç»è¿‡ï¼Œéœ€è¦æ‰‹åŠ¨åˆ°è®¾ç½®ä¸­å¼€å¯

### **å¼€å‘è€…è¦æ±‚**
- Apple Developer è´¦æˆ·
- æ­£ç¡®çš„ Bundle ID é…ç½®
- HealthKit æƒé™å·²åœ¨å¼€å‘è€…é—¨æˆ·å¯ç”¨

## ğŸ› ï¸ æ•…éšœæ’é™¤

### **æŒ‰é’®ä¸æ˜¾ç¤º**
- ç¡®è®¤æ˜¯åœ¨ iOS è®¾å¤‡ä¸Šè¿è¡Œ
- æ£€æŸ¥åº”ç”¨æ˜¯å¦æ­£ç¡®æ„å»ºåˆ°è®¾å¤‡

### **æƒé™è¯·æ±‚å¤±è´¥**
- æ£€æŸ¥ `app.json` ä¸­çš„ HealthKit é…ç½®
- ç¡®è®¤å¼€å‘è€…è´¦æˆ·ä¸­å·²å¯ç”¨ HealthKit
- éªŒè¯ Bundle ID æ˜¯å¦æ­£ç¡®

### **è·å–æ•°æ®å¤±è´¥**
- ç¡®è®¤å¥åº·åº”ç”¨ä¸­æœ‰æ­¥æ•°è®°å½•
- æ£€æŸ¥æ—¶é—´èŒƒå›´å†…æ˜¯å¦æœ‰æ•°æ®
- å°è¯•æ‰‹åŠ¨åœ¨å¥åº·åº”ç”¨ä¸­æ·»åŠ ä¸€äº›æ­¥æ•°æ•°æ®

### **åº“å¯¼å…¥é”™è¯¯**
- ç¡®è®¤ `react-native-health` å·²æ­£ç¡®å®‰è£…
- è¿è¡Œ `npx pod-install` é‡æ–°é“¾æ¥åŸç”Ÿåº“
- æ£€æŸ¥ Metro ç¼“å­˜ï¼š`npx expo start --clear`

## ğŸ“ˆ æ‰©å±•åŠŸèƒ½

è¿™ä¸ªæµ‹è¯•åŠŸèƒ½å¯ä»¥è½»æ¾æ‰©å±•ï¼š

1. **æ›´å¤šæ•°æ®ç±»å‹** - æµ‹è¯•ç¡çœ ã€å¿ƒç‡ç­‰å…¶ä»– HealthKit æ•°æ®
2. **æ—¶é—´èŒƒå›´** - å…è®¸ç”¨æˆ·é€‰æ‹©ä¸åŒçš„æ—¶é—´èŒƒå›´
3. **æ•°æ®è¯¦æƒ…** - æ˜¾ç¤ºæ¯æ—¥è¯¦ç»†çš„æ­¥æ•°åˆ†å¸ƒ
4. **å¯¼å‡ºåŠŸèƒ½** - å°†æµ‹è¯•ç»“æœå¯¼å‡ºæˆ–åˆ†äº«

---

**é‡è¦**ï¼šè¿™ä¸ªæµ‹è¯•åŠŸèƒ½æ˜¯å¼€å‘å’Œè°ƒè¯•ä¸“ç”¨ï¼Œåœ¨ç”Ÿäº§ç‰ˆæœ¬ä¸­å¯ä»¥é€‰æ‹©éšè—æˆ–ç§»é™¤ã€‚
